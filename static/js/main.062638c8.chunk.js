(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/007-questions.f14e07e7.mp3"},127:function(e,t,a){e.exports=a.p+"static/media/loading.58607b10.gif"},128:function(e,t,a){e.exports=a.p+"static/media/feedback.37746763.mp3"},129:function(e,t,a){e.exports=a.p+"static/media/ranking.ec382311.mp3"},130:function(e,t,a){e.exports=a(253)},145:function(e,t){},147:function(e,t){},181:function(e,t){},182:function(e,t){},247:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(54),i=a.n(s),c=a(12),o=a(13),u=a(30),l=a(120),m=a(121),p=a(18),h=a(24),d=a.n(h),f=function(e){return{type:"NEW_QUESTIONS",results:e}},b=function(e){return function(t,a){var n,r,s,i,c;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="Any Category"===a().game.settings.category?"":"&category=".concat(a().game.settings.category),r="Any Difficulty"===a().game.settings.difficulty?"":"&difficulty=".concat(a().game.settings.difficulty),s="Any Type"===a().game.settings.type?"":"&type=".concat(a().game.settings.type),o.next=5,d.a.awrap(fetch("\n    ".concat("https://opentdb.com/api.php?amount=5").concat(n).concat(r).concat(s,"&token=").concat(e,"\n  ")));case 5:return i=o.sent,o.next=8,d.a.awrap(i.json());case 8:return c=o.sent,o.abrupt("return",t(f(c)));case 10:case"end":return o.stop()}}))}},y=function(e){return{type:"USER_TOKEN",token:e}},g=function(e){return{type:"ADD_CATEGORIES",categories:e}},v={name:"",email:""};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(p.a)({},e,{name:t.name,email:t.email});default:return e}},k={hash:"",token:""};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_HASH":return Object(p.a)({},e,{hash:t.hash});case"USER_TOKEN":return Object(p.a)({},e,{token:t.token});default:return e}},j=a(47),N={results:[],score:0,assertions:0,ranking:[],settings:{category:"Any Category",difficulty:"Any Difficulty",type:"Any Type"},options:{categories:["Loading..."],difficulty:[{id:0,name:"Any Difficulty"},{id:"easy",name:"Easy"},{id:"medium",name:"Medium"},{id:"hard",name:"Hard"}],type:[{id:0,name:"Any Type"},{id:"multiple",name:"Multiple Choice"},{id:"boolean",name:"True / False"}]}};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_QUESTIONS":return Object(p.a)({},e,{results:t.results.results});case"SUM_POINTS":return Object(p.a)({},e,{score:e.score+t.score,assertions:e.assertions+1});case"RESET_GAME":return Object(p.a)({},e,{score:0,assertions:0,results:[]});case"ADD_CATEGORIES":return Object(p.a)({},e,{options:Object(p.a)({},e.options,{categories:[{id:0,name:"Any Category"}].concat(Object(j.a)(t.categories))})});case"SAVE_SETTINGS":return Object(p.a)({},e,{settings:{category:t.category,difficulty:t.difficulty,type:t.alternativesType}});case"ADD_RANKING":return Object(p.a)({},e,{ranking:[].concat(Object(j.a)(e.ranking),[{name:t.name,score:e.score,picture:"https://www.gravatar.com/avatar/".concat(t.hash)}])});default:return e}},S=Object(u.combineReducers)({user:E,token:O,game:C}),w=Object(u.createStore)(S,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(m.a))),A=a(9),x=a(10),_=a(14),T=a(11),q=a(15),D=a(31),I=a(39),R=a(17),G=a(122),M=a.n(G),P=(a(247),a(125)),U=a(124),F=a(79),Q=a(26),V=a.n(Q),J=a(56),H=a.n(J),K=function(e){function t(){var e;return Object(A.a)(this,t),(e=Object(_.a)(this,Object(T.a)(t).call(this))).state={email:"",name:"",isPlaying:!0},e.handleChange=e.handleChange.bind(Object(R.a)(e)),e.onClick=e.onClick.bind(Object(R.a)(e)),e.play=e.play.bind(Object(R.a)(e)),e}return Object(q.a)(t,e),Object(x.a)(t,[{key:"onClick",value:function(e){e.preventDefault();var t=this.state,a=t.name,n=t.email,r=this.props,s=r.myUser,i=r.hashGravatar,c=r.requestToken,o=M.a.MD5(n).toString();s(a,n),i(o),c()}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(I.a)({},t.name,t.value))}},{key:"play",value:function(){var e=this.state.isPlaying;this.setState({isPlaying:!e})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.isPlaying,s=!(t&&a),i="";return s&&(i="disabled"),r.a.createElement("div",{className:"form-wrap"},r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"wrap-600"},r.a.createElement("h1",null,"Trivia Game"),r.a.createElement("label",{htmlFor:"email"},"Email do Gravatar:",r.a.createElement("input",{id:"email",type:"email",name:"email",value:a,"data-testid":"input-gravatar-email",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"name"},"Nome do Jogador:",r.a.createElement("input",{id:"name",type:"text",name:"name",value:t,"data-testid":"input-player-name",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:s,onClick:this.onClick,className:"bt_login"},r.a.createElement(c.b,{to:"/game",className:"bt-jogar ".concat(i)},r.a.createElement(U.a,{size:"50"}))),r.a.createElement(c.b,{to:"/settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"bt_login"},r.a.createElement(P.a,{size:"50"}))),r.a.createElement("button",{type:"button",className:"bt_login",onClick:this.play},n?r.a.createElement(F.b,{size:"50"}):r.a.createElement(F.a,{size:"50"}),n?r.a.createElement(V.a,{autoPlay:!0,loop:!0,src:H.a,volume:.5}):null)))))}}]),t}(r.a.Component),L=Object(o.b)(null,(function(e){return{myUser:function(t,a){return e(function(e,t){return{type:"ADD_USER",name:e,email:t}}(t,a))},hashGravatar:function(t){return e(function(e){return{type:"USER_HASH",hash:e}}(t))},requestToken:function(){return e((function(e){var t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return t=n.sent,n.next=5,d.a.awrap(t.json());case 5:return a=n.sent,localStorage.setItem("token",a.token),n.next=9,d.a.awrap(e(y(a.token)));case 9:return n.abrupt("return",e(b(a.token)));case 10:case"end":return n.stop()}}))}))}}}))(K),z=function(e){function t(e){var a;Object(A.a)(this,t),a=Object(_.a)(this,Object(T.a)(t).call(this,e));var n=e.category,r=e.difficulty,s=e.type;return a.handleChange=a.handleChange.bind(Object(R.a)(a)),a.state={category:n,difficulty:r,type:s},a}return Object(q.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.requestCategories)()}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(I.a)({},t.id,t.value))}},{key:"render",value:function(){var e=this.props,t=e.options,a=e.confirm,n=this.state,s=n.category,i=n.difficulty,o=n.type;return r.a.createElement("div",{className:"content-wrap"},r.a.createElement(V.a,{autoPlay:!0,loop:!0,src:H.a,volume:.5}),r.a.createElement("h1",{"data-testid":"settings-title"},"CONFIGURA\xc7\xd5ES"),r.a.createElement("label",{htmlFor:"categories"},r.a.createElement("select",{id:"category",onChange:this.handleChange,value:s},t.categories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("label",{htmlFor:"difficulty"},r.a.createElement("select",{id:"difficulty",onChange:this.handleChange,value:i},t.difficulty.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("label",{htmlFor:"type"},r.a.createElement("select",{id:"type",onChange:this.handleChange,value:o},t.type.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:"buttons_settings"},r.a.createElement("button",{className:"bt_margin",type:"button",onClick:function(){return a(s,i,o)}},"Confirmar"),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button"},"Voltar"))))}}]),t}(r.a.Component),W=Object(o.b)((function(e){return{options:e.game.options,category:e.game.settings.category,difficulty:e.game.settings.difficulty,type:e.game.settings.type}}),(function(e){return{requestCategories:function(){return e((function(e){var t,a,n;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.awrap(fetch("https://opentdb.com/api_category.php"));case 2:return t=r.sent,r.next=5,d.a.awrap(t.json());case 5:return a=r.sent,n=a.trivia_categories.map((function(e){return e})),r.abrupt("return",e(g(n)));case 8:case"end":return r.stop()}}))}))},confirm:function(t,a,n){return e(function(e,t,a){return{type:"SAVE_SETTINGS",category:e,difficulty:t,alternativesType:a}}(t,a,n))}}}))(z),B=(a(249),function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hash,a=e.name,n=e.score;return r.a.createElement("header",{className:"app-header"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(t),alt:"foto perfil"}),r.a.createElement("span",{"data-testid":"header-player-name"},a),r.a.createElement("span",{className:"header-score","data-testid":"header-score"},n))}}]),t}(r.a.Component)),X=Object(o.b)((function(e){return{hash:e.token.hash,name:e.user.name,score:e.game.score}}))(B),Y=(a(250),a(126)),Z=a.n(Y),$=a(127),ee=a.n($),te=function(e){function t(){var e;return Object(A.a)(this,t),(e=Object(_.a)(this,Object(T.a)(t).call(this))).myChoice=e.myChoice.bind(Object(R.a)(e)),e.timer=e.timer.bind(Object(R.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(R.a)(e)),e.resetState=e.resetState.bind(Object(R.a)(e)),e.state={questionNumber:0,answered:!1,isShuffle:!1,shuffledAnswers:[],time:30},e}return Object(q.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){0===this.state.questionNumber&&this.startTimer(),this.setInfoOnLocalStorage()}},{key:"componentDidUpdate",value:function(){this.setInfoOnLocalStorage()}},{key:"setInfoOnLocalStorage",value:function(){var e=this.props,t=e.name,a=e.email,n=e.score,r=e.assertions,s=JSON.stringify({player:{name:t,assertions:r,score:n,gravatarEmail:a}});localStorage.setItem("state",s)}},{key:"timer",value:function(){0===this.state.time?this.setState({answered:!0}):this.setState((function(e){return{time:e.time-1}}))}},{key:"myChoice",value:function(e){var t=e.target,a=this.props.results,n=this.state.questionNumber,r=t.value;this.setState({answered:!0}),r===a[n].correct_answer&&this.pointsCalc(),clearInterval(this.intervalID)}},{key:"class",value:function(e){var t=this.state,a=t.answered,n=t.questionNumber,r=this.props.results,s="answer";return a&&(s=e===r[n].correct_answer?"correct":"incorrect"),s}},{key:"fixChars",value:function(e){return e.replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&eacute;/g,"\xe9")}},{key:"alternatives",value:function(e,t){var a=this,n=[0,1,2],s=this.state,i=s.questionNumber,c=s.answered;return r.a.createElement("div",{className:"alternatives"},e.map((function(e,s){return r.a.createElement("button",{key:s,type:"button",value:e,className:a.class(e),disabled:c,"data-testid":e===t[i].correct_answer?"correct-answer":"wrong-answer-".concat(n.shift()),onClick:a.myChoice},a.fixChars(e))})))}},{key:"shuffle",value:function(e){var t=this.state.isShuffle,a=e.sort((function(){return Math.random()-.5}));t||this.setState({shuffledAnswers:a,isShuffle:!0})}},{key:"question",value:function(){var e=this.props.results,t=this.state,a=t.answered,n=t.shuffledAnswers,s=t.questionNumber,i=t.time,c=[e[s].correct_answer].concat(Object(j.a)(e[s].incorrect_answers));return a||this.shuffle(c),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null),r.a.createElement("h3",{"data-testid":"question-category"},"Category: ".concat(this.fixChars(e[s].category))),r.a.createElement("h2",{"data-testid":"question-text"},"Question: ".concat(this.fixChars(e[s].question))),this.alternatives(n,e),r.a.createElement("div",{className:"timer"},r.a.createElement("p",null,i)))}},{key:"startTimer",value:function(){this.intervalID=setInterval(this.timer,1e3)}},{key:"pointsCalc",value:function(){var e=this.props,t=e.sumPoints,a=e.results,n=this.state,r=n.time,s=n.questionNumber,i=0;"easy"===a[s].difficulty&&(i=1),"medium"===a[s].difficulty&&(i=2),"hard"===a[s].difficulty&&(i=3),t(10+r*i)}},{key:"nextQuestion",value:function(){var e=this.state.questionNumber;this.setState({questionNumber:e+1,answered:!1,isShuffle:!1,time:30}),this.startTimer()}},{key:"resetState",value:function(){this.setState({questionNumber:0,answered:!1,isShuffle:!1,shuffledAnswers:[],time:30})}},{key:"render",value:function(){var e=this.props.results,t=this.state,a=t.answered,n=t.questionNumber;return r.a.createElement("div",{className:"content-wrap"},5===n?r.a.createElement(D.a,{to:"/feedback"}):null,5===n?this.resetState():null,e[n]?this.question():r.a.createElement("img",{src:ee.a,width:"50%",alt:"Loading"}),r.a.createElement(V.a,{autoPlay:!0,loop:!0,src:Z.a,volume:.5}),r.a.createElement("button",{type:"button",disabled:!a,hidden:!a,"data-testid":"btn-next",onClick:this.nextQuestion},"Pr\xf3xima"))}}]),t}(r.a.Component),ae=Object(o.b)((function(e){return{results:e.game.results,name:e.user.name,email:e.user.email,score:e.game.score,assertions:e.game.assertions}}),(function(e){return{sumPoints:function(t){return e({type:"SUM_POINTS",score:t})}}}))(te),ne=a(128),re=a.n(ne),se=function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.ranking)(e.name,e.hash)}},{key:"feedScore",value:function(){return this.props.assertions<3?r.a.createElement("h1",{"data-testid":"feedback-text"},"Podia ser melhor..."):r.a.createElement("h1",{"data-testid":"feedback-text"},"Mandou bem!")}},{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score,n=e.reset;return r.a.createElement("div",{className:"content-wrap"},r.a.createElement(V.a,{autoPlay:!0,src:re.a,volume:.5}),r.a.createElement("div",null,r.a.createElement(X,null)),r.a.createElement("div",null,this.feedScore(),r.a.createElement("h3",null,"Voc\xea acertou"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},t)," ","quest\xf5es!",r.a.createElement("br",null),"Um total de"," ",r.a.createElement("span",{"data-testid":"feedback-total-score"},a)," ","pontos")),r.a.createElement(c.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:n,className:"bt_margin"},"VER RANKING")),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:n},"JOGAR NOVAMENTE")))}}]),t}(r.a.Component),ie=Object(o.b)((function(e){return{score:e.game.score,assertions:e.game.assertions,name:e.user.name,hash:e.token.hash}}),(function(e){return{reset:function(){return e({type:"RESET_GAME"})},ranking:function(t,a){return e(function(e,t){return{type:"ADD_RANKING",name:e,hash:t}}(t,a))}}}))(se),ce=a(129),oe=a.n(ce),ue=function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props.ranking;return r.a.createElement("div",{className:"content-wrap"},r.a.createElement(V.a,{autoPlay:!0,src:oe.a,volume:.5}),r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("div",{key:t,className:"wrap-player-ranking"},r.a.createElement("img",{src:e.picture,alt:"esquilo",className:"img-ranking"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{className:"rank-score","data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-go-home"},"JOGAR NOVAMENTE")))}}]),t}(r.a.Component),le=Object(o.b)((function(e){return{ranking:e.game.ranking}}))(ue),me=(a(251),function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return r.a.createElement(D.d,null,r.a.createElement(D.b,{path:"/settings",component:W}),r.a.createElement(D.b,{path:"/game",component:ae}),r.a.createElement(D.b,{path:"/feedback",component:ie}),r.a.createElement(D.b,{path:"/ranking",component:le}),r.a.createElement(D.b,{exact:!0,path:"/",component:L}))}}]),t}(r.a.Component));a(252);i.a.render(r.a.createElement(o.a,{store:w},r.a.createElement(c.a,{basename:"/trivia-react-redux"},r.a.createElement(me,null))),document.getElementById("root"))},56:function(e,t,a){e.exports=a.p+"static/media/007-login.dd07c461.mp3"}},[[130,1,2]]]);
//# sourceMappingURL=main.062638c8.chunk.js.map